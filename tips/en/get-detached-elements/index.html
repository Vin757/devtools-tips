<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get detached DOM elements to investigate memory leaks</title>
    <link rel="stylesheet" type="text/css" href="/assets/style.css">
    <link rel="icon" href="/assets/favicon.ico" />
    <link rel="manifest" href="/manifest.json">
    <link rel="alternate" type="application/atom+xml" href="https://devtoolstips.org/feed.xml" />
    <meta property="og:title" content="DevTools Tips">
    <meta property="og:url" content="https://devtoolstips.org/tips/en/get-detached-elements/">
    
    <meta property="og:image" content="http://devtoolstips.org/assets/img/get-detached-elements.png">
    <meta property="og:description" content="Get detached DOM elements to investigate memory leaks">
    
    <meta name="twitter:site" content="@_devtoolstips">
    <meta property="og:site_name" content="DevTools Tips">
    <meta name="twitter:card" content="summary">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4P6B6NT4Y8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4P6B6NT4Y8');
    </script>
  </head>
  <body>
    <a href="#maincontent" class="skip-link">Skip to main content</a>
    <header>
      <h1><a href="/">DevTools Tips</a></h1>
      <nav>
        <ul class="header-menu">
          <li><a href="/">All tips</a></li>
          <li tabindex="0">Categories
            <ul class="submenu-reveal"><li><a href="/tag/accessibility/">accessibility</a></li><li><a href="/tag/console/">console</a></li><li><a href="/tag/css/">css</a></li><li><a href="/tag/debug/">debug</a></li><li><a href="/tag/export/">export</a></li><li><a href="/tag/help/">help</a></li><li><a href="/tag/highlighter/">highlighter</a></li><li><a href="/tag/html/">html</a></li><li><a href="/tag/javascript/">javascript</a></li><li><a href="/tag/network/">network</a></li><li><a href="/tag/perf/">perf</a></li><li><a href="/tag/personalization/">personalization</a></li><li><a href="/tag/productivity/">productivity</a></li><li><a href="/tag/pwa/">pwa</a></li><li><a href="/tag/testing/">testing</a></li><li><a href="/tag/webcomponents/">webcomponents</a></li></ul>
          </li>
          <li tabindex="0">Browsers
            <ul class="submenu-reveal"><li><a href="/browser/chrome/">chrome</a></li><li><a href="/browser/edge/">edge</a></li><li><a href="/browser/firefox/">firefox</a></li><li><a href="/browser/polypane/">polypane</a></li><li><a href="/browser/safari/">safari</a></li></ul>
          </li>
        </ul>
      </nav>
    </header>
    <div class="header-shadow"></div>
    <div class="header-shadow-block"></div>
    <main id="maincontent">
      <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
<h2 class="tip-title">Get detached DOM elements to investigate memory leaks</h2>
<div class="tip-info">
    Categories:
    <ul class="tags"><li class="tag"><a href="/tag/perf/">perf</a></li></ul>
    Supported by:
    <ul class="browsers"><li class="browser"><a href="/browser/edge/">edge</a></li></ul>
</div>
<div class="tip-content">
    <p>Memory leaks can quickly become a big problem for long-running applications, and a common source of memory leaks is detached DOM elements (elements that are no longer attached to the DOM tree).
It's usually very hard to investigate these memory leaks, because it's hard to know if elements are detached, and which ones, let alone find which part of your JavaScript code is causing them to be detached.</p>
<p>Edge has a tool just for this: the <strong>Detached Elements</strong> panel. To use it:</p>
<ul>
<li>Open the <strong>command menu</strong> and type &quot;detached&quot; to find and open the <strong>Detached Elements</strong> tool.</li>
<li>Click the <strong>Get detached elements</strong> button to list all of the currently detached elements.</li>
<li>Click the <strong>Analyze</strong> button to take a memory heap snapshot. Once done, you can then double-click any of the detached elements' <strong>Id</strong>s to find the link between these elements and your JavaScript code in the <strong>Memory</strong> panel.</li>
<li>Don't forget to click the <strong>Collect garbage</strong> button every once in a while to force garbage collection. Then get the detached elements again. Indeed, some elements may remain in memory simply because the browser hasn't yet cleaned them up. Forcing GC makes sure the list only contains the elements that are detached and cannot be cleaned up.</li>
</ul>
<p>You can find out much more about this tool in this <a href="https://blogs.windows.com/msedgedev/2021/12/09/debug-memory-leaks-detached-elements-tool-devtools/">blog post</a> and over at Microsoft's <a href="https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide-chromium/memory-problems/dom-leaks">documentation</a> site.</p>
<p><img src="/assets/img/get-detached-elements.png" alt="The Detached Elements panel in Edge, with the Memory panel next to it."></p>

</div>
<div class="tip-footer"><div class="authors">Authors: <span><a href="https://patrickbrosset.com">Patrick Brosset</a></span></div>
        <p class="last-edit">Last edit: <time datetime="2022-01-10T00:00:00.000Z">1/10/2022</time> - <a href="https://github.com/captainbrosset/devtools-tips/edit/main/./src/tips/en/get-detached-elements.md">Edit page</a></p></div>
<script async src="/assets/share.js"></script>
<script async src="/assets/dialog-lightbox.js"></script>

    </main>
    <footer role="contentinfo">
      <p>Have ideas for other tips? We'd love you to submit them on <a href="https://github.com/captainbrosset/devtools-tips">our GitHub repository!</a> â™¥</p>
      <p>Find us on <a href="https://twitter.com/_devtoolstips">Twitter</a> and <a rel="me" href="https://front-end.social/@devtoolstips">Mastodon</a>.</p>
    </footer>
    <script>
      async function registerPeriodicSync() {
        const registration = await navigator.serviceWorker.ready;
        // Check if periodicSync is supported
        if ('periodicSync' in registration) {
          // Request permission
          const status = await navigator.permissions.query({
            name: 'periodic-background-sync',
          });

          if (status.state === 'granted') {
            try {
              // Register new sync every 24 hours
              await registration.periodicSync.register('update-cached-content', {
                minInterval: 24 * 60 * 60 * 1000, // 1 day
              });
              console.log('Periodic background sync registered!');
            } catch(e) {
              console.error(`Periodic background sync failed:\nx${e}`);
            }
          } else {
            console.info('Periodic background sync is not granted.');
          }
        } else {
          console.log('Periodic background sync is not supported.');
        }
      }

      if('serviceWorker' in navigator) {
        // Register the service worker
        navigator.serviceWorker.register('/sw.js', {
          scope: '/'
        });

        // Register the periodic background sync
        registerPeriodicSync();
      }
    </script>
  </body>
</html>
