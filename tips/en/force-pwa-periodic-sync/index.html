<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force PWA periodic background syncs</title>
    <link rel="stylesheet" type="text/css" href="/assets/style.css">
    <link rel="icon" href="/assets/favicon.ico" />
    <link rel="manifest" href="/manifest.json">    
    <meta property="og:title" content="DevTools Tips">
    <meta property="og:url" content="https://devtoolstips.org/tips/en/force-pwa-periodic-sync/">
    
    <meta property="og:image" content="http://devtoolstips.org/assets/img/force-pwa-periodic-sync.png">
    <meta property="og:description" content="Force PWA periodic background syncs">
    
    <meta name="twitter:site" content="@_devtoolstips">
    <meta property="og:site_name" content="DevTools Tips">
    <meta name="twitter:card" content="summary">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4P6B6NT4Y8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4P6B6NT4Y8');
    </script>
  </head>
  <body>
    <header>
      <h1><a href="/">DevTools Tips</a></h1>
      <nav>
        <ul class="header-menu">
          <li tabindex="0">Categories
            <ul class="submenu-reveal"><li><a href="/tag/accessibility/">accessibility</a></li><li><a href="/tag/console/">console</a></li><li><a href="/tag/css/">css</a></li><li><a href="/tag/debug/">debug</a></li><li><a href="/tag/export/">export</a></li><li><a href="/tag/help/">help</a></li><li><a href="/tag/highlighter/">highlighter</a></li><li><a href="/tag/html/">html</a></li><li><a href="/tag/javascript/">javascript</a></li><li><a href="/tag/network/">network</a></li><li><a href="/tag/perf/">perf</a></li><li><a href="/tag/personalization/">personalization</a></li><li><a href="/tag/productivity/">productivity</a></li><li><a href="/tag/pwa/">pwa</a></li><li><a href="/tag/testing/">testing</a></li><li><a href="/tag/webcomponents/">webcomponents</a></li></ul>
          </li>
          <li tabindex="0">Browsers
            <ul class="submenu-reveal"><li><a href="/browser/chrome/">chrome</a></li><li><a href="/browser/edge/">edge</a></li><li><a href="/browser/firefox/">firefox</a></li><li><a href="/browser/safari/">safari</a></li></ul>
          </li>
          <li><a href="/all/">All Tips</a></li>
        </ul>
      </nav>
    </header>
    <div class="header-shadow"></div>
    <div class="header-shadow-block"></div>
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
<main>
    <div class="tip-info">
        Categories:
        <ul class="tags"><li class="tag"><a href="/tag/network/">network</a></li><li class="tag"><a href="/tag/pwa/">pwa</a></li></ul>
        Supported by:
        <ul class="browsers"><li class="browser"><a href="/browser/edge/">edge</a></li><li class="browser"><a href="/browser/chrome/">chrome</a></li></ul>
    </div>
    <h2 class="tip-title">Force PWA periodic background syncs</h2>
    <div class="tip-content">
        <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Periodic_Background_Synchronization_API">periodic background sync API</a>, available to PWAs is a great way to fetch new content while the user isn't on the site, and while they have access to the network, to make sure they have the latest content when they come back to the app.</p>
<p>It can be hard to debug though, as the sync only happen after the minimum interval has passed, and the browser thinks that now is a good time to trigger the sync.</p>
<p>Thankfully, there is a way in Chrome and Edge to force the sync, so you don't have to wait for the browser to do it.</p>
<ul>
<li>Navigate to the <strong>Application</strong> panel.</li>
<li>Select the <strong>Service Workers</strong> tab.</li>
<li>Scroll down to the <strong>Periodic Sync</strong> input.</li>
<li>Enter the tag name for your registered sync, and click the <strong>Periodic Sync</strong> button.</li>
</ul>
<p><img src="/assets/img/force-pwa-periodic-sync.png" alt="Screenshot of the Application panel in Edge showing the periodic sync input and buttons"></p>

    </div>
    <div class="tip-footer">
        <ul class="authors">Authors:<li><a href="https://github.com/captainbrosset/devtools-tips/commit/22b264a8bb40107bd27af5ae4fb16c4aa1458b8b">Patrick Brosset</a></li></ul><p class="last-edit">Last edit: <time datetime="2021-09-10T07:23:51.000Z">9/10/2021</time></p>
    </div>
</main>
<script async src="/assets/share.js"></script>

    <footer role="contentinfo">
      <p>Have ideas for other tips? We'd love you to submit them on <a href="https://github.com/captainbrosset/devtools-tips">our GitHub repository!</a> â™¥</p>
      <p>&copy; 2022 <a href="https://patrickbrosset.com">Patrick Brosset</a></p>
    </footer>
    <script>
      async function registerPeriodicSync() {
        const registration = await navigator.serviceWorker.ready;
        // Check if periodicSync is supported
        if ('periodicSync' in registration) {
          // Request permission
          const status = await navigator.permissions.query({
            name: 'periodic-background-sync',
          });

          if (status.state === 'granted') {
            try {
              // Register new sync every 24 hours
              await registration.periodicSync.register('update-cached-content', {
                minInterval: 24 * 60 * 60 * 1000, // 1 day
              });
              console.log('Periodic background sync registered!');
            } catch(e) {
              console.error(`Periodic background sync failed:\nx${e}`);
            }
          } else {
            console.info('Periodic background sync is not granted.');
          }
        } else {
          console.log('Periodic background sync is not supported.');
        }
      }

      if('serviceWorker' in navigator) {
        // Register the service worker
        navigator.serviceWorker.register('/sw.js', {
          scope: '/'
        });

        // Register the periodic background sync
        registerPeriodicSync();
      }
    </script>
  </body>
</html>
